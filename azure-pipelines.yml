trigger: none

stages:
- stage: DEV
  jobs:
  - job: Linux
    pool:
      vmImage: ubuntu-16.04
    steps:
      - task: Go@0
        inputs:
          command: test
          arguments: -v
          workingDirectory: 
      - task: Go@0
        inputs:
          command: build
          arguments: -v -o $(Build.ArtifactStagingDirectory)/simpleGolangWebApp
          workingDirectory: 
      - task: PublishBuildArtifacts@1
        inputs:
          pathtoPublish: '$(Build.ArtifactStagingDirectory)'
          artifactName: SimpleWebApp-Linux
  - job: Windows
    pool:
      vmImage: windows-2019
    steps:
      - task: Go@0
        inputs:
          command: test
          arguments: -v
          workingDirectory: 
      - task: Go@0
        inputs:
          command: build
          arguments: -v -o $(Build.ArtifactStagingDirectory)/simpleGolangWebApp.exe
          workingDirectory: 
      - task: PublishBuildArtifacts@1
        inputs:
          pathtoPublish: '$(Build.ArtifactStagingDirectory)'
          artifactName: SimpleWebApp-Windows